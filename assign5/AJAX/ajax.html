<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Open Weather via Ajax</title>
</head>
<body>
    <h1>Open Weather via AJAX</h1>
    <table>
        <tr>
            <td><label for="zip"><b>Enter ZIP code:</b></label>
                <input type="text" id="zip" name="zip" /></td>
            <td><input type="button" id="getwet" name="getwet" value="Get Weather"/></td>
            <td><input type="button" id="clear" name="clear" value="Clear"/></td>
        </tr>
    </table>
    <textarea name="weather" id="textarea" cols="30" rows="10"></textarea>
    <script>

        async function logWet() {
          var zipcodeDesired = document.getElementById("zip").value;
          const response = await fetch("https://api.openweathermap.org/data/2.5/weather?zip=" + zipcodeDesired + ",us&units=imperial&APPID=da4330fe41bd4de5f1144989e264ed58");
          const weather = await response.json();
          console.log(weather);
          console.log(weather["main"]["temp"]);
          temperature = weather["main"]["temp"];
          location_name = weather["name"];
          document.getElementById("textarea").value = location_name +": " + temperature +  " \n" + document.getElementById("textarea").value;
        }
        
        function clear() {
            document.getElementById("zip").value = "";
            document.getElementById("textarea").value = "";
        }

        document.getElementById("getwet").addEventListener("click", logWet);
        document.getElementById("clear").addEventListener("click", clear);
        
        </script>
</body>
</html>
